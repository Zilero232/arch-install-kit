#################################
#          Основные настройки    #
#################################
backend = "glx";             # Использование OpenGL для лучшей производительности
vsync = true;                # Включение вертикальной синхронизации
log-level = "warn";          # Уровень логирования

#################################
#          Тени                  #
#################################
shadow = true;               # Включение теней
shadow-radius = 7;           # Небольшой радиус размытия тени
shadow-offset-x = -7;        # Смещение тени по X
shadow-offset-y = -7;        # Смещение тени по Y

# Исключения для теней
shadow-exclude = [
  "name = 'Notification'",   # Исключаем уведомления
  "class_g = 'Conky'",       # Исключаем Conky
  "class_g ?= 'Notify-osd'", # Исключаем OSD-уведомления
  "class_g = 'Cairo-clock'", # Исключаем Cairo-clock
  "_GTK_FRAME_EXTENTS@:c"    # Исключаем GTK рамки
];

#################################
#          Затухание            #
#################################
fading = true;               # Включение эффекта затухания
fade-in-step = 0.03;         # Скорость появления окон (3%)
fade-out-step = 0.03;        # Скорость исчезновения окон (3%)
fade-delta = 3;              # Время между шагами затухания (3мс)

#################################
#          Прозрачность         #
#################################
inactive-opacity = 0.8;      # Прозрачность неактивных окон (80%)
frame-opacity = 0.7;         # Прозрачность рамок окон (70%)
inactive-opacity-override = false;  # Не переопределять значения прозрачности

# Правила прозрачности для конкретных приложений
opacity-rule = [
  "92:class_g = 'Alacritty' && focused",    # 92% для активного Alacritty
  "90:class_g = 'Alacritty' && !focused"    # 90% для неактивного Alacritty
];

#################################
#          Размытие             #
#################################
blur: {
  method = "box";            # Простой метод размытия
  size = 5;                  # Размер ядра размытия
}

# Исключения для размытия
blur-background-exclude = [
  "window_type = 'dock'",    # Исключаем док-панели
  "window_type = 'desktop'", # Исключаем рабочий стол
  "_GTK_FRAME_EXTENTS@:c"    # Исключаем GTK рамки
];

#################################
#          Типы окон            #
#################################
wintypes: {
  tooltip = {               # Настройки всплывающих подсказок
    fade = true;            # Включаем затухание
    shadow = true;          # Включаем тени
    opacity = 0.75;         # Устанавливаем прозрачность 75%
    focus = true;           # Всегда в фокусе
    full-shadow = false;    # Отключаем полные тени
  };
  dock = { shadow = false }  # Отключаем тени для док-панелей
  dnd = { shadow = false }   # Отключаем тени для drag-and-drop
  popup_menu = { opacity = 0.8 }     # Прозрачность всплывающих меню
  dropdown_menu = { opacity = 0.8 }  # Прозрачность выпадающих меню
};

#################################
#     Оптимизация               #
#################################
glx-no-stencil = true;       # Отключение буфера трафарета для повышения производительности
glx-no-rebind-pixmap = true; # Отключение перепривязки пиксельной карты
use-damage = false;          # Отключение частичной перерисовки
refresh-rate = 0;            # Автоопределение частоты обновления
detect-transient = true;     # Определение временных окон
detect-client-leader = true; # Определение окон-лидеров