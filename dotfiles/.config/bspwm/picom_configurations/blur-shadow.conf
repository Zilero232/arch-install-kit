# vim: foldmethod=marker

# Основные настройки рендеринга
backend = "glx";              # Использование OpenGL для лучшей производительности
vsync = false;                # Отключение вертикальной синхронизации для снижения задержек
use-damage = true             # Обновление только измененных участков экрана
unredir-if-possible = true;   # Отключение композитинга для полноэкранных приложений
# glx-no-stencil = true;      # Отключение буфера трафарета (может улучшить производительность)
# glx-no-rebind-pixmap = true; # Отключение перепривязки пиксельной карты

# Fading - настройки плавного появления/исчезновения окон {{{
fading = true;               # Включение эффекта затухания
fade-in-step = 0.09;         # Шаг появления (больше значение - быстрее появление)
fade-out-step = 0.08;        # Шаг исчезновения (больше значение - быстрее исчезновение)
fade-delta = 10;             # Интервал между шагами в миллисекундах
no-fading-openclose = false; # Включить затухание при открытии/закрытии окон
# }}}

# Wintypes - настройки для разных типов окон {{{
wintypes:
{
  tooltip = { shadow = false; }; # Отключение теней для всплывающих подсказок
};
# }}}

# Shadows - настройки теней окон {{{
shadow = true;              # Включение теней
shadow-radius = 15;         # Радиус размытия тени
shadow-offset-x = -15;      # Смещение тени по горизонтали
shadow-offset-y = -15;      # Смещение тени по вертикали
shadow-opacity = 0.75;      # Непрозрачность тени

# Исключения для теней
shadow-exclude = [
  "bounding_shaped && !rounded_corners", # Исключение окон особой формы без скругленных углов
  "window_type = 'desktop'",             # Исключение рабочего стола
  "window_type = 'utility'",             # Исключение утилит
  "window_type = 'splash'",              # Исключение заставок
  "window_type = 'tooltip'",             # Исключение подсказок
  "window_type *= 'menu'",               # Исключение всех типов меню
  "window_type != 'dock' && BSPWM_TILED@:c = 1",  # Исключение тайловых окон в BSPWM
  "class_g *?= 'activate-linux'",        # Исключение конкретного приложения
]
# }}}

# Blur - настройки размытия {{{
blur:
{
  method = "dual_kawase";   # Метод размытия (более качественный)
  strength = 5;             # Сила размытия (1-10)
}

blur-background = true;       # Размытие фона
blur-background-frame = true; # Размытие включая рамки окон
blur-background-fixed = true; # Фиксированное размытие

# Исключения для размытия
blur-background-exclude = [
  "window_type = 'desktop'",             # Исключение рабочего стола
  "window_type *= 'menu'",               # Исключение меню
  "window_type = 'utility'",             # Исключение утилит
  "window_type = 'tooltip'",             # Исключение подсказок
  "window_type = 'splash'",              # Исключение заставок
  "class_g *?= 'screenkey'",             # Исключение конкретных приложений
  "class_g *?= 'GLava'",
  "class_g *?= 'kdeconnectd'",
  "class_g *?= 'kdeconnect.daemon'",
  "class_g *?= 'activate-linux'",
  "_GTK_FRAME_EXTENTS@:c"               # Исключение GTK рамок
];
# }}}

# Opacity - настройки прозрачности {{{
frame-opacity = 0.8;        # Прозрачность рамок окон

# inactive-dim = 0.8;       # Затемнение неактивных окон (закомментировано)

# Правила прозрачности для конкретных приложений
opacity-rule = [ 
  "95:class_g *?= 'chatterino'",        # 95% непрозрачности для Chatterino
  "95:class_g *?= 'dunst'"              # 95% непрозрачности для уведомлений Dunst
];
# }}}

# Rounded corners - настройки скругленных углов {{{
corner-radius = 10.0;       # Радиус скругления углов

# Исключения для скругленных углов
rounded-corners-exclude = [
  "window_type = 'dock'",               # Исключение док-панели
  "window_type = 'desktop'",            # Исключение рабочего стола
  "window_type = 'dropdown_menu'",      # Исключение выпадающих меню
  "window_type = 'popup_menu'",         # Исключение всплывающих меню
  "window_type = 'utility'",            # Исключение утилит
  "window_type = 'tooltip'",            # Исключение подсказок
  "window_type = 'splash'",             # Исключение заставок
  "class_g *?= 'dunst'",                # Исключение уведомлений Dunst
  "BSPWM_TILED@:c = 1",                 # Исключение тайловых окон в BSPWM
  "_NET_WM_STATE@[*]:32a = '_NET_WM_STATE_FULLSCREEN'", # Исключение полноэкранных окон
];
# }}}